package vn.edu.iuh.fit.controller;import com.sun.security.auth.UserPrincipal;import jakarta.servlet.http.HttpSession;import org.antlr.v4.runtime.Token;import org.apache.catalina.User;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.http.*;import org.springframework.web.bind.annotation.*;import org.springframework.web.client.RestTemplate;import vn.edu.iuh.fit.entity.Account;import vn.edu.iuh.fit.entity.Book;import java.util.Arrays;import java.util.List;@RestControllerpublic class ApiGetwayController {    private final String bookApiUrl = "http://localhost:8081/api/book";    private final String jwtToken = "http://localhost:8080/login";    private final RestTemplate restTemplate = new RestTemplate();    @Autowired    private HttpSession session;//Lấu danh sách book từ service book    @GetMapping("/getBooks")    public List<Book> getBooks() {        Book[] books = restTemplate.getForObject(bookApiUrl, Book[].class);        return Arrays.asList(books);    }    @PostMapping("/login")    public ResponseEntity<?> login(@RequestBody Account user, HttpSession session) {        // Perform authentication in your authentication service        ResponseEntity<String> authenticationResponse = restTemplate.postForEntity(                jwtToken,                user,                String.class        );        if (authenticationResponse.getStatusCode() == HttpStatus.OK) {      //Xác thực thành công            String authToken = authenticationResponse.getBody();//Lưu vào sesson            session.setAttribute("authToken", authToken);            return ResponseEntity.ok("Login thành công");        } else {            //Xác thực thất bại            return  ResponseEntity.ok("Login thất bại");        }    }}